#
# configure xorg directories
#
# runlevels: openelec, text

progress "creating directories needed for Xorg"

  $IONICE mkdir -p /var/cache/xkb
  $IONICE mkdir -p /var/lib
  $IONICE mkdir -m 1777 -p /tmp/.ICE-unix
  $IONICE chown root:root /tmp/.ICE-unix

  if lspci -n | grep 0300 | grep -q 10de; then
    $IONICE ln -sf /usr/lib/libGL_nvidia.so.1 /var/lib/libGL.so
    $IONICE ln -sf /usr/lib/xorg/modules/extensions/libglx_nvidia.so /var/lib/libglx.so
  else
    $IONICE ln -sf /usr/lib/libGL_mesa.so.1 /var/lib/libGL.so
    $IONICE ln -sf /usr/lib/xorg/modules/extensions/libglx_mesa.so /var/lib/libglx.so
  fi
