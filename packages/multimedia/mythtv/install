#!/bin/sh

. config/options

$SCRIPTS/install alsa
#$SCRIPTS/install lame
$SCRIPTS/install libX11
$SCRIPTS/install libXinerama
$SCRIPTS/install freetype
$SCRIPTS/install qt-x11-opensource
#$SCRIPTS/install lirc
#$SCRIPTS/install lcd4linux
$SCRIPTS/install liberation-fonts

mkdir -p $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythbackend/mythbackend $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythcommflag/mythcommflag $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythfilldatabase/mythfilldatabase $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythfrontend/mythfrontend $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythjobqueue/mythjobqueue $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythlcdserver/mythlcdserver $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythshutdown/mythshutdown $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythtranscode/mythtranscode $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythtranscode/replex/mythreplex $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythtv/mythtv $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythtvosd/mythtvosd $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythtv-setup/mythtv-setup $INSTALL/usr/bin
  cp -PR $PKG_BUILD/programs/mythwelcome/mythwelcome $INSTALL/usr/bin

mkdir -p $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libavcodec/libmythavcodec*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libavformat/libmythavformat*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libavutil/libmythavutil*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libmyth/libmyth*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libmythdb/libmythdb*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libmythfreemheg/libmythfreemheg*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libmythlivemedia/libmythlivemedia*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libmythtv/libmythtv*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libmythui/libmythui*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libmythupnp/libmythupnp*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/libs/libswscale/libmythswscale*.so* $INSTALL/usr/lib

mkdir -p $INSTALL/usr/lib/mythtv/filters
  cp -PR $PKG_BUILD/filters/*/*.so $INSTALL/usr/lib/mythtv/filters

mkdir -p $INSTALL/usr/share/mythtv
  cp -PR $PKG_BUILD/themes/*.ttf $INSTALL/usr/share/mythtv
  cp -PR $PKG_BUILD/programs/mythbackend/*.xml $INSTALL/usr/share/mythtv
  cp -PR $PKG_BUILD/programs/mythfrontend/*.xml $INSTALL/usr/share/mythtv
  cp -PR $PKG_BUILD/libs/libmythupnp/*.xml $INSTALL/usr/share/mythtv
  cp -PR $PKG_BUILD/programs/scripts/database/*.pl $INSTALL/usr/share/mythtv


mkdir -p $INSTALL/usr/share/mythtv/i18n
  cp -PR $PKG_BUILD/i18n/*.qm $INSTALL/usr/share/mythtv/i18n

mkdir -p $INSTALL/usr/share/mythtv/themes
  cp -PR $PKG_BUILD/themes/*/ $INSTALL/usr/share/mythtv/themes

mkdir -p $INSTALL/usr/share/mythtv/database
  cp -PR $PKG_BUILD/database/mc.sql $INSTALL/usr/share/mythtv/database

mkdir -p $INSTALL/lib/udev
  cp -PR $PKG_BUILD/contrib/Linux/udev_monitor/mythtv_udev_monitor.sh $INSTALL/lib/udev/

mkdir -p $INSTALL/lib/udev/rules.d
  cp -PR $PKG_BUILD/contrib/Linux/udev_monitor/mythtv.rules $INSTALL/lib/udev/rules.d/66-mythtv.rules
  sed -i "s|RUN+=.*|RUN+=\"/lib/udev/mythtv_udev_monitor.sh\"|" $INSTALL/lib/udev/rules.d/66-mythtv.rules

