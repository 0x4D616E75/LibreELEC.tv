#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build zlib
$SCRIPTS/build libiconv
$SCRIPTS/build ffmpeg
$SCRIPTS/build freetype
$SCRIPTS/build fontconfig
$SCRIPTS/build libX11
$SCRIPTS/build libXext
$SCRIPTS/build libXvMC
$SCRIPTS/build $MESA
$SCRIPTS/build alsa-lib
$SCRIPTS/build libcdio
# $SCRIPTS/build vcdimager
$SCRIPTS/build flac
$SCRIPTS/build libtheora
$SCRIPTS/build libvorbis


cd $PKG_BUILD
export LDFLAGS="$LDFLAGS -lm -lintl -ldl -lavcodec -lavformat -lavutil -lpostproc -lswscale -liconv"
export CPP=${TARGET_PREFIX}cpp
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=/usr \
            --sysconfdir=/etc \
            --enable-shared \
            --disable-static \
            --disable-debug \
            --disable-ipv6 \
            --disable-antialiasing \
            --disable-dependency-tracking \
            --disable-optimizations \
            --disable-mmap \
            --enable-largefile \
            --disable-coreaudio \
            --disable-irixal \
            --disable-oss \
            --disable-sunaudio \
            --without-sndio \
            --disable-aalib \
            --disable-dha-kmod \
            --disable-directfb \
            --disable-dxr3 \
            --disable-fb \
            --disable-macosx-video \
            --enable-opengl \
            --disable-glu \
            --disable-vidix \
            --disable-xinerama \
            --disable-static-xv \
            --enable-xvmc \
            --disable-dvb \
            --disable-gnomevfs \
            --disable-samba \
            --disable-v4l \
            --disable-vcd \
            --enable-vdr \
            --enable-a52dec \
            --enable-asf \
            --enable-nosefart \
            --enable-faad \
            --disable-gdkpixbuf \
            --enable-dts \
            --enable-mad \
            --disable-modplug \
            --disable-libmpeg2new \
            --disable-musepack \
            --disable-mlib \
            --disable-mlib-lazyload \
            --enable-mng \
            --enable-real-codecs \
            --with-real-codecs-path=/storage/.codecs \
            --enable-w32dll \
            --with-w32-path=/storage/.codecs \
            --with-freetype \
            --with-fontconfig \
            --with-x \
            --with-alsa \
            --without-esound \
            --without-fusionsound \
            --without-jack \
            --without-pulseaudio \
            --without-caca \
            --without-dxheaders \
            --without-libstk \
            --without-sdl \
            --without-vdpau \
            --without-xcb \
            --without-external-dvdnav \
            --without-imagemagick \
            --with-libflac \
            --without-speex \
            --with-theora \
            --with-vorbis \
            --without-xcb \
            --without-wavpack \

make
make -C src/vdr

$MAKEINSTALL
