#!/bin/sh

. config/options $1

add_user system x 430 430 "service" "/var/run/connman" "/bin/sh"
add_group system 430

mkdir -p $INSTALL/etc/dbus-1/system.d
  cp $PKG_BUILD/src/connman.conf $INSTALL/etc/dbus-1/system.d

mkdir -p $INSTALL/usr/lib/connman/plugins
  cp $PKG_BUILD/plugins/.libs/*.so $INSTALL/usr/lib/connman/plugins

mkdir -p $INSTALL/usr/sbin
  cp -P $PKG_BUILD/src/connmand $INSTALL/usr/sbin

if [ "$DEVTOOLS" = yes ]; then
  mkdir -p $INSTALL/usr/bin/connman
    cp $PKG_BUILD/tools/addr-test $INSTALL/usr/bin/connman
    cp $PKG_BUILD/tools/dbus-test $INSTALL/usr/bin/connman
    cp $PKG_BUILD/tools/polkit-test $INSTALL/usr/bin/connman
    cp $PKG_BUILD/tools/portal-test $INSTALL/usr/bin/connman
    cp $PKG_BUILD/tools/resolv-test $INSTALL/usr/bin/connman
    cp $PKG_BUILD/tools/supplicant-test $INSTALL/usr/bin/connman
    cp $PKG_BUILD/tools/tap-test $INSTALL/usr/bin/connman
    cp $PKG_BUILD/tools/wifi-scan $INSTALL/usr/bin/connman

  mkdir -p $INSTALL/usr/lib/connman/test
    cp $PKG_BUILD/test/* $INSTALL/usr/lib/connman/test
fi
