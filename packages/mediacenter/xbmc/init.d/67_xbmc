#!/bin/sh
#
# configure X.Org video settings
#
# runlevels: openelec

. /etc/sysconfig

wait_for_xorg

# export XBMC_HOME="/usr/share/xbmc"
args="--standalone -fs --lircdev $LIRC_OUTPUT"

while true; do

  progress "starting Mediacenter"

  DISPLAY=:0.0 /usr/bin/xbmc ${args} > /dev/null 2>&1
  RET=$?
  echo "Exited with code $RET"

  [ "$RET" == 0 ] && break
  [ "$RET" == 64 ] && sync && poweroff
  [ "$RET" == 66 ] && sync && reboot

done
