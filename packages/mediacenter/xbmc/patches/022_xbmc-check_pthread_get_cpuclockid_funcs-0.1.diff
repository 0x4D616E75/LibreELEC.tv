diff -Naur xbmc-24229/configure.in xbmc-24229.patch/configure.in
--- xbmc-24229/configure.in	2009-11-03 12:39:23.963428747 +0100
+++ xbmc-24229.patch/configure.in	2009-11-03 12:39:40.036396583 +0100
@@ -336,6 +336,9 @@
   AC_CHECK_LIB([SDL_gfx], [main])
 fi
 
+AC_CHECK_LIB([pthread],[pthread_getcpuclockid],
+            AC_DEFINE([HAVE_PTHREAD_GETCPUCLOCKID], [1],
+            [Define to 1 if you have the 'pthread_getcpuclockid' function]))
 
 # platform independent libraries
 AC_CHECK_HEADER([mad.h],,            AC_MSG_ERROR($missing_library))
diff -Naur xbmc-24229/xbmc/linux/XThreadUtils.cpp xbmc-24229.patch/xbmc/linux/XThreadUtils.cpp
--- xbmc-24229/xbmc/linux/XThreadUtils.cpp	2009-11-03 10:50:11.248527059 +0100
+++ xbmc-24229.patch/xbmc/linux/XThreadUtils.cpp	2009-11-03 12:39:40.038397087 +0100
@@ -19,6 +19,8 @@
  *
  */
 
+#include "config.h"
+
 #include "PlatformDefs.h"
 #include "XHandle.h"
 #include "XThreadUtils.h"
@@ -189,7 +191,7 @@
     if (lpKernelTime)
       lpKernelTime->dwLowDateTime = lpKernelTime->dwHighDateTime = 0;
   }
-#elif _POSIX_THREAD_CPUTIME != -1
+#elif HAVE_PTHREAD_GETCPUCLOCKID && _POSIX_THREAD_CPUTIME != -1 
     if(lpUserTime)
     {
       lpUserTime->dwLowDateTime = 0;
