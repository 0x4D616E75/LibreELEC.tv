#!/bin/sh

. config/options

$SCRIPTS/install Python
$SCRIPTS/install zlib
$SCRIPTS/install bzip2
$SCRIPTS/install lzo
$SCRIPTS/install pcre

$SCRIPTS/install alsa-lib
$SCRIPTS/install enca
$SCRIPTS/install curl

$SCRIPTS/install dbus
$SCRIPTS/install hal
#$SCRIPTS/install DeviceKit-disks
#$SCRIPTS/install ConsoleKit

$SCRIPTS/install libXt
$SCRIPTS/install libXtst
$SCRIPTS/install libXmu
$SCRIPTS/install libXinerama
$SCRIPTS/install libXrandr

$SCRIPTS/install $MESA
[ "$VDPAU" = yes ] && $SCRIPTS/install libvdpau
[ "$CRYSTALHD" = yes ] && $SCRIPTS/install crystalhd
$SCRIPTS/install glew
$SCRIPTS/install fontconfig
$SCRIPTS/install fribidi

$SCRIPTS/install jpeg
$SCRIPTS/install libpng
$SCRIPTS/install tiff
$SCRIPTS/install freetype
$SCRIPTS/install jasper
# $SCRIPTS/install libass

# $SCRIPTS/install a52dec # static
$SCRIPTS/install libmad
$SCRIPTS/install libsamplerate
$SCRIPTS/install libogg
$SCRIPTS/install libvorbis
$SCRIPTS/install libcdio
$SCRIPTS/install libmms
$SCRIPTS/install faac
$SCRIPTS/install faad2
$SCRIPTS/install flac
$SCRIPTS/install wavpack
$SCRIPTS/install libmpeg2
# $SCRIPTS/install musepack
[ "$FFMPEG" = external ] && $SCRIPTS/install ffmpeg

$SCRIPTS/install SDL
$SCRIPTS/install SDL_mixer
$SCRIPTS/install SDL_image

$SCRIPTS/install avahi
$SCRIPTS/install sqlite
$SCRIPTS/install mysql
$SCRIPTS/install samba

PKG_DIR=`find $PACKAGES -type d -name $1`

mkdir -p $INSTALL/usr/share/xbmc
  cp -PR $PKG_BUILD/xbmc.bin $INSTALL/usr/share/xbmc

mkdir -p $INSTALL/usr/share/xbmc/language
  cp -PR $PKG_BUILD/language/* $INSTALL/usr/share/xbmc/language

mkdir -p $INSTALL/usr/share/xbmc/media/Fonts
  cp -PR $PKG_BUILD/media/Fonts/*.ttf $INSTALL/usr/share/xbmc/media/Fonts
  cp -PR $PKG_DIR/fonts/*.ttf $INSTALL/usr/share/xbmc/media/Fonts

mkdir -p $INSTALL/usr/share/xbmc/media
  cp -PR $PKG_BUILD/media/weather.zip $INSTALL/usr/share/xbmc/media/
  cp -PR $PKG_BUILD/media/icon.png $INSTALL/usr/share/xbmc/media/

mkdir -p $INSTALL/usr/share/xbmc/scripts
  cp -PR $PKG_BUILD/scripts/*.zip $INSTALL/usr/share/xbmc/scripts/

mkdir -p $INSTALL/usr/share/xbmc/skin

mkdir -p $INSTALL/usr/share/xbmc/sounds
  cp -PR $PKG_BUILD/sounds/* $INSTALL/usr/share/xbmc/sounds

mkdir -p $INSTALL/usr/share/xbmc/system
  cp -PR $PKG_BUILD/system/*linux.so $INSTALL/usr/share/xbmc/system
  cp -PR $PKG_BUILD/system/*.xml $INSTALL/usr/share/xbmc/system
  cp -PR $PKG_BUILD/system/*.conf $INSTALL/usr/share/xbmc/system

mkdir -p $INSTALL/usr/share/xbmc/system/keymaps
  cp -PR $PKG_BUILD/system/keymaps/* $INSTALL/usr/share/xbmc/system/keymaps

mkdir -p $INSTALL/usr/share/xbmc/system/players/dvdplayer
  cp -PR $PKG_BUILD/system/players/dvdplayer/*.so $INSTALL/usr/share/xbmc/system/players/dvdplayer
  cp -PR $PKG_BUILD/system/players/dvdplayer/etc $INSTALL/usr/share/xbmc/system/players/dvdplayer

mkdir -p $INSTALL/usr/share/xbmc/system/players/paplayer
  cp -PR $PKG_BUILD/system/players/paplayer/*.so $INSTALL/usr/share/xbmc/system/players/paplayer

mkdir -p $INSTALL/usr/share/xbmc/system/python
  cp -PR $PKG_BUILD/system/python/*.so $INSTALL/usr/share/xbmc/system/python
  cp -PR $PKG_BUILD/system/python/spyce $INSTALL/usr/share/xbmc/system/python

mkdir -p $INSTALL/usr/share/xbmc/system/scrapers
  cp -PR $PKG_BUILD/system/scrapers/* $INSTALL/usr/share/xbmc/system/scrapers

mkdir -p $INSTALL/usr/share/xbmc/system/shaders
  cp -PR $PKG_BUILD/system/shaders/* $INSTALL/usr/share/xbmc/system/shaders

mkdir -p $INSTALL/usr/share/xbmc/userdata
  cp -PR $PKG_BUILD/userdata/* $INSTALL/usr/share/xbmc/userdata

#mkdir -p $INSTALL/usr/share/xbmc/visualisations
#  cp -PR $PKG_BUILD/visualisations/Waveform.vis $INSTALL/usr/share/xbmc/visualisations
#  cp -PR $PKG_BUILD/visualisations/opengl_spectrum.vis $INSTALL/usr/share/xbmc/visualisations
#    cp -PR $PKG_BUILD/visualisations/Milkdrop $INSTALL/usr/share/xbmc/visualisations #not need
#    cp -PR $PKG_BUILD/visualisations/projectM $INSTALL/usr/share/xbmc/visualisations #not need

mkdir -p $INSTALL/usr/share/xbmc/web
  cp -R $PKG_BUILD/web/Project_Mayhem_III/* $INSTALL/usr/share/xbmc/web

mkdir -p $INSTALL/usr/share/xbmc/addons
  cp -PR $PKG_BUILD/addons/* $INSTALL/usr/share/xbmc/addons

# other programs needed to run
  $SCRIPTS/install alsa
  $SCRIPTS/install lirc
  $SCRIPTS/install vdr
