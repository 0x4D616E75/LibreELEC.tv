#!/bin/sh

. config/options

$SCRIPTS/install udev
$SCRIPTS/install glib
$SCRIPTS/install dbus
$SCRIPTS/install dbus-glib
$SCRIPTS/install polkit

mkdir -p $INSTALL/etc
  cp -P $PKG_BUILD/etc/UPower.conf  $INSTALL/etc

mkdir -p $INSTALL/etc/dbus-1/system.d
  cp -P $PKG_BUILD/src/org.freedesktop.UPower.conf  $INSTALL/etc/dbus-1/system.d

mkdir -p $INSTALL/usr/bin
  cp -P $PKG_BUILD/tools/.libs/upower $INSTALL/usr/bin

mkdir -p $INSTALL/usr/lib
  cp -P $PKG_BUILD/devkit-power-gobject/.libs/*.so* $INSTALL/usr/lib
  cp -P $PKG_BUILD/libupower-glib/.libs/*.so* $INSTALL/usr/lib

mkdir -p $INSTALL/usr/lib/upower
  cp -P $PKG_BUILD/src/.libs/upowerd $INSTALL/usr/lib/upower

mkdir -p $INSTALL/usr/share/dbus-1/interfaces
  cp -P $PKG_BUILD/src/org.freedesktop.UPower.Device.xml $INSTALL/usr/share/dbus-1/interfaces
  cp -P $PKG_BUILD/src/org.freedesktop.UPower.QoS.xml $INSTALL/usr/share/dbus-1/interfaces
  cp -P $PKG_BUILD/src/org.freedesktop.UPower.Wakeups.xml $INSTALL/usr/share/dbus-1/interfaces
  cp -P $PKG_BUILD/src/org.freedesktop.UPower.xml $INSTALL/usr/share/dbus-1/interfaces

mkdir -p $INSTALL/usr/share/dbus-1/system-services
  cp -P $PKG_BUILD/src/org.freedesktop.UPower.service $INSTALL/usr/share/dbus-1/system-services

mkdir -p $INSTALL/usr/share/polkit-1/actions
  cp -P $PKG_BUILD/policy/org.freedesktop.upower.policy $INSTALL/usr/share/polkit-1/actions
  cp -P $PKG_BUILD/policy/org.freedesktop.upower.qos.policy $INSTALL/usr/share/polkit-1/actions
