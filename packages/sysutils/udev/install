#!/bin/sh

. config/options

PKG_DIR=`find $PACKAGES -type d -name $1`

mkdir -p $INSTALL/sbin
cp $PKG_BUILD/$1/udevadm $INSTALL/sbin

mkdir -p $INSTALL/usr/bin
ln -sf /sbin/udevadm $INSTALL/usr/bin/udevinfo

mkdir -p $INSTALL/usr/sbin
cp $PKG_BUILD/$1/udevd $INSTALL/usr/sbin
#cp $PKG_BUILD/extras/firmware_helper/firmware_helper $INSTALL/sbin

mkdir -p $INSTALL/usr/lib/udev
for i in ata_id cdrom_id edd_id path_id scsi_id usb_id; do
  cp $PKG_BUILD/extras/$i/$i $INSTALL/usr/lib/udev
done
cp $PKG_BUILD/extras/volume_id/vol_id $INSTALL/usr/lib/udev

#mkdir -p $INSTALL/usr/lib/udev
#for i in ata_id cdrom_id dvb_device_name edd_id ide_media path_id scsi_id usb_device_name usb_id; do
#  cp $PKG_BUILD/extras/$i/$i $INSTALL/usr/lib/udev
#done
#cp $PKG_BUILD/extras/volume_id/vol_id $INSTALL/usr/lib/udev

mkdir -p $INSTALL/usr/lib
cp -PR $PKG_BUILD/extras/volume_id/lib/.libs/libvolume_id.so* $INSTALL/usr/lib
cp -PR $PKG_BUILD/udev/lib/.libs/libudev.so* $INSTALL/usr/lib

mkdir -p $INSTALL/etc/udev/rules.d
cp $PKG_DIR/config/udev.conf $INSTALL/etc/udev
cp $PKG_DIR/config/rules.d/* $INSTALL/etc/udev/rules.d
