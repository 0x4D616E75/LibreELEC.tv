#!/bin/sh

. config/options

$SCRIPTS/install libpng
$SCRIPTS/install pango
$SCRIPTS/install gtk+

PKG_DIR=`find $PACKAGES -type d -name $1`

PLYMOUTH_THEMES="details fade-in glow script solar spinfinity text"

mkdir -p $INSTALL/bin
  cp -PR $PKG_BUILD/src/client/.libs/plymouth $INSTALL/bin

mkdir -p $INSTALL/usr/sbin
  cp -PR $PKG_BUILD/src/.libs/plymouthd $INSTALL/usr/sbin

mkdir -p $INSTALL/usr/lib
  cp -PR $PKG_BUILD/src/libply/.libs/*.so* $INSTALL/usr/lib
  cp -PR $PKG_BUILD/src/libplybootsplash/.libs/*.so* $INSTALL/usr/lib
    rm -rf $INSTALL/usr/lib/libplybootsplash.so*T

mkdir -p $INSTALL/usr/lib/plymouth
  cp -PR $PKG_BUILD/src/plugins/*/*/.libs/*.so $INSTALL/usr/lib/plymouth
  ln -sf fade-throbber.so  $INSTALL/usr/lib/plymouth/default.so


mkdir -p $INSTALL/usr/share/plymouth/themes
  cp -PR $PKG_BUILD/themes/* $INSTALL/usr/share/plymouth/themes/
  find $INSTALL/usr/share/plymouth/themes -name *.in -exec rm -rf "{}" ";"
  find $INSTALL/usr/share/plymouth/themes -name "Makefile*" -exec rm -rf "{}" ";"

mkdir -p $INSTALL/usr/share/plymouth/
  cp $PKG_DIR/background/OpenELEC.png $INSTALL/usr/share/plymouth/background.png

# for theme in $PLYMOUTH_THEMES; do
#   mkdir -p $INSTALL/usr/share/plymouth/themes/$theme
#     cp -PR $PKG_BUILD/themes/$theme/*.plymouth $INSTALL/usr/share/plymouth/themes/$theme ||
#     cp -PR $PKG_BUILD/themes/$theme/*.script $INSTALL/usr/share/plymouth/themes/$theme ||
#     cp -PR $PKG_BUILD/themes/$theme/*.png $INSTALL/usr/share/plymouth/themes/$theme ||
# done
