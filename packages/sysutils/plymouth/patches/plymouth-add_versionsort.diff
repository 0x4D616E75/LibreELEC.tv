diff -Naur plymouth-0.7.1/config.h.in plymouth-0.7.1.patch/config.h.in
--- plymouth-0.7.1/config.h.in	2009-08-14 14:40:40.000000000 +0200
+++ plymouth-0.7.1.patch/config.h.in	2009-09-26 22:08:47.000000000 +0200
@@ -3,6 +3,9 @@
 /* Define to 1 if you have the <dlfcn.h> header file. */
 #undef HAVE_DLFCN_H
 
+/* Define to 1 if fseeko (and presumably ftello) exists and is declared. */
+#undef HAVE_FSEEKO
+
 /* Define to 1 if you have the <inttypes.h> header file. */
 #undef HAVE_INTTYPES_H
 
@@ -30,6 +33,9 @@
 /* Define to 1 if you have the <unistd.h> header file. */
 #undef HAVE_UNISTD_H
 
+/* Define to 1 if you have the `versionsort' function. */
+#undef HAVE_VERSIONSORT
+
 /* Define to the sub-directory in which libtool stores uninstalled libraries.
    */
 #undef LT_OBJDIR
@@ -92,6 +98,9 @@
 /* Version number of package */
 #undef VERSION
 
+/* Define to 1 to make fseeko visible on some hosts (e.g. glibc 2.2). */
+#undef _LARGEFILE_SOURCE
+
 /* Define to 1 if on MINIX. */
 #undef _MINIX
 
diff -Naur plymouth-0.7.1/configure plymouth-0.7.1.patch/configure
--- plymouth-0.7.1/configure	2009-08-25 19:35:19.000000000 +0200
+++ plymouth-0.7.1.patch/configure	2009-09-26 22:08:47.552695133 +0200
@@ -822,6 +822,8 @@
 PLYMOUTH_CFLAGS
 IMAGE_LIBS
 IMAGE_CFLAGS
+HAVE_VERSIONSORT_FALSE
+HAVE_VERSIONSORT_TRUE
 LT_AGE
 LT_REVISION
 LT_CURRENT
@@ -6443,13 +6445,13 @@
 else
   lt_cv_nm_interface="BSD nm"
   echo "int some_variable = 0;" > conftest.$ac_ext
-  (eval echo "\"\$as_me:6446: $ac_compile\"" >&5)
+  (eval echo "\"\$as_me:6448: $ac_compile\"" >&5)
   (eval "$ac_compile" 2>conftest.err)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:6449: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
+  (eval echo "\"\$as_me:6451: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
   (eval "$NM \"conftest.$ac_objext\"" 2>conftest.err > conftest.out)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:6452: output\"" >&5)
+  (eval echo "\"\$as_me:6454: output\"" >&5)
   cat conftest.out >&5
   if $GREP 'External.*some_variable' conftest.out > /dev/null; then
     lt_cv_nm_interface="MS dumpbin"
@@ -7654,7 +7656,7 @@
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 7657 "configure"' > conftest.$ac_ext
+  echo '#line 7659 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -9019,11 +9021,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9022: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9024: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:9026: \$? = $ac_status" >&5
+   echo "$as_me:9028: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -9358,11 +9360,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9361: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9363: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:9365: \$? = $ac_status" >&5
+   echo "$as_me:9367: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -9463,11 +9465,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9466: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9468: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:9470: \$? = $ac_status" >&5
+   echo "$as_me:9472: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -9518,11 +9520,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9521: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9523: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:9525: \$? = $ac_status" >&5
+   echo "$as_me:9527: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -12321,7 +12323,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 12324 "configure"
+#line 12326 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -12417,7 +12419,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 12420 "configure"
+#line 12422 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -12662,6 +12664,339 @@
 
 
 
+for ac_func in versionsort
+do
+as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
+{ $as_echo "$as_me:$LINENO: checking for $ac_func" >&5
+$as_echo_n "checking for $ac_func... " >&6; }
+if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
+  $as_echo_n "(cached) " >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define $ac_func innocuous_$ac_func
+
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func (); below.
+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+    <limits.h> exists even on freestanding compilers.  */
+
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+
+#undef $ac_func
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char $ac_func ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined __stub_$ac_func || defined __stub___$ac_func
+choke me
+#endif
+
+int
+main ()
+{
+return $ac_func ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+$as_echo "$ac_try_echo") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext && {
+	 test "$cross_compiling" = yes ||
+	 $as_test_x conftest$ac_exeext
+       }; then
+  eval "$as_ac_var=yes"
+else
+  $as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	eval "$as_ac_var=no"
+fi
+
+rm -rf conftest.dSYM
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+fi
+ac_res=`eval 'as_val=${'$as_ac_var'}
+		 $as_echo "$as_val"'`
+	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+as_val=`eval 'as_val=${'$as_ac_var'}
+		 $as_echo "$as_val"'`
+   if test "x$as_val" = x""yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+done
+
+{ $as_echo "$as_me:$LINENO: checking for _LARGEFILE_SOURCE value needed for large files" >&5
+$as_echo_n "checking for _LARGEFILE_SOURCE value needed for large files... " >&6; }
+if test "${ac_cv_sys_largefile_source+set}" = set; then
+  $as_echo_n "(cached) " >&6
+else
+  while :; do
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <sys/types.h> /* for off_t */
+     #include <stdio.h>
+int
+main ()
+{
+int (*fp) (FILE *, off_t, int) = fseeko;
+     return fseeko (stdin, 0, 0) && fp (stdin, 0, 0);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+$as_echo "$ac_try_echo") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext && {
+	 test "$cross_compiling" = yes ||
+	 $as_test_x conftest$ac_exeext
+       }; then
+  ac_cv_sys_largefile_source=no; break
+else
+  $as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+
+fi
+
+rm -rf conftest.dSYM
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#define _LARGEFILE_SOURCE 1
+#include <sys/types.h> /* for off_t */
+     #include <stdio.h>
+int
+main ()
+{
+int (*fp) (FILE *, off_t, int) = fseeko;
+     return fseeko (stdin, 0, 0) && fp (stdin, 0, 0);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+$as_echo "$ac_try_echo") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext && {
+	 test "$cross_compiling" = yes ||
+	 $as_test_x conftest$ac_exeext
+       }; then
+  ac_cv_sys_largefile_source=1; break
+else
+  $as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+
+fi
+
+rm -rf conftest.dSYM
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+  ac_cv_sys_largefile_source=unknown
+  break
+done
+fi
+{ $as_echo "$as_me:$LINENO: result: $ac_cv_sys_largefile_source" >&5
+$as_echo "$ac_cv_sys_largefile_source" >&6; }
+case $ac_cv_sys_largefile_source in #(
+  no | unknown) ;;
+  *)
+cat >>confdefs.h <<_ACEOF
+#define _LARGEFILE_SOURCE $ac_cv_sys_largefile_source
+_ACEOF
+;;
+esac
+rm -rf conftest*
+
+# We used to try defining _XOPEN_SOURCE=500 too, to work around a bug
+# in glibc 2.1.3, but that breaks too many other things.
+# If you want fseeko and ftello with glibc, upgrade to a fixed glibc.
+if test $ac_cv_sys_largefile_source != unknown; then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_FSEEKO 1
+_ACEOF
+
+fi
+
+
+have_versionsort=no
+{ $as_echo "$as_me:$LINENO: checking for versionsort" >&5
+$as_echo_n "checking for versionsort... " >&6; }
+if test "${ac_cv_func_versionsort+set}" = set; then
+  $as_echo_n "(cached) " >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+/* Define versionsort to an innocuous variant, in case <limits.h> declares versionsort.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define versionsort innocuous_versionsort
+
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char versionsort (); below.
+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+    <limits.h> exists even on freestanding compilers.  */
+
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+
+#undef versionsort
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char versionsort ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined __stub_versionsort || defined __stub___versionsort
+choke me
+#endif
+
+int
+main ()
+{
+return versionsort ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+$as_echo "$ac_try_echo") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext && {
+	 test "$cross_compiling" = yes ||
+	 $as_test_x conftest$ac_exeext
+       }; then
+  ac_cv_func_versionsort=yes
+else
+  $as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_func_versionsort=no
+fi
+
+rm -rf conftest.dSYM
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+fi
+{ $as_echo "$as_me:$LINENO: result: $ac_cv_func_versionsort" >&5
+$as_echo "$ac_cv_func_versionsort" >&6; }
+if test "x$ac_cv_func_versionsort" = x""yes; then
+  have_versionsort=yes
+fi
+
+ if test "x$have_versionsort" = xyes; then
+  HAVE_VERSIONSORT_TRUE=
+  HAVE_VERSIONSORT_FALSE='#'
+else
+  HAVE_VERSIONSORT_TRUE='#'
+  HAVE_VERSIONSORT_FALSE=
+fi
+
+
+
 pkg_failed=no
 { $as_echo "$as_me:$LINENO: checking for IMAGE" >&5
 $as_echo_n "checking for IMAGE... " >&6; }
@@ -13532,6 +13867,13 @@
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${HAVE_VERSIONSORT_TRUE}" && test -z "${HAVE_VERSIONSORT_FALSE}"; then
+  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_VERSIONSORT\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+$as_echo "$as_me: error: conditional \"HAVE_VERSIONSORT\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${ENABLE_PANGO_TRUE}" && test -z "${ENABLE_PANGO_FALSE}"; then
   { { $as_echo "$as_me:$LINENO: error: conditional \"ENABLE_PANGO\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
diff -Naur plymouth-0.7.1/configure.ac plymouth-0.7.1.patch/configure.ac
--- plymouth-0.7.1/configure.ac	2009-08-25 19:29:58.000000000 +0200
+++ plymouth-0.7.1.patch/configure.ac	2009-09-26 22:06:11.380608981 +0200
@@ -33,6 +33,13 @@
 AC_SUBST(LT_REVISION)
 AC_SUBST(LT_AGE)
 
+AC_CHECK_FUNCS([versionsort])
+AC_FUNC_FSEEKO
+ 
+have_versionsort=no
+AC_CHECK_FUNC([versionsort], [have_versionsort=yes])
+AM_CONDITIONAL([HAVE_VERSIONSORT], test "x$have_versionsort" = xyes)
+
 PKG_CHECK_MODULES(IMAGE, [libpng >= 1.2.16 ]) 
 AC_SUBST(IMAGE_CFLAGS)
 AC_SUBST(IMAGE_LIBS)
diff -Naur plymouth-0.7.1/src/libplybootsplash/Makefile.am plymouth-0.7.1.patch/src/libplybootsplash/Makefile.am
--- plymouth-0.7.1/src/libplybootsplash/Makefile.am	2009-08-25 19:22:44.000000000 +0200
+++ plymouth-0.7.1.patch/src/libplybootsplash/Makefile.am	2009-09-26 05:46:43.139700189 +0200
@@ -1,3 +1,7 @@
+if !HAVE_VERSIONSORT
+fallback =  strverscmp.c
+endif
+
 INCLUDES = -I$(top_srcdir)                                                    \
            -I$(srcdir)                                                        \
            -I$(srcdir)/../libply                                              \
@@ -29,6 +33,7 @@
 		    ply-progress-animation.c                                 \
 		    ply-text-progress-bar.c                                  \
 		    ply-text-pulser.c                                        \
-		    ply-window.c
+		    ply-window.c                                             \
+		    $(fallback)
 
 MAINTAINERCLEANFILES = Makefile.in
diff -Naur plymouth-0.7.1/src/libplybootsplash/Makefile.in plymouth-0.7.1.patch/src/libplybootsplash/Makefile.in
--- plymouth-0.7.1/src/libplybootsplash/Makefile.in	2009-08-25 19:35:24.000000000 +0200
+++ plymouth-0.7.1.patch/src/libplybootsplash/Makefile.in	2009-09-26 22:08:50.334695444 +0200
@@ -74,7 +74,17 @@
 am__DEPENDENCIES_1 =
 libplybootsplash_la_DEPENDENCIES = $(am__DEPENDENCIES_1) \
 	$(am__DEPENDENCIES_1) ../libply/libply.la
+am__libplybootsplash_la_SOURCES_DIST = ply-entry.h ply-image.h \
+	ply-progress-bar.h ply-text-progress-bar.h ply-text-pulser.h \
+	ply-throbber.h ply-animation.h ply-progress-animation.h \
+	ply-window.h ply-label.h ply-boot-splash-plugin.h \
+	ply-label-plugin.h ply-entry.c ply-image.c ply-label.c \
+	ply-progress-bar.c ply-throbber.c ply-animation.c \
+	ply-progress-animation.c ply-text-progress-bar.c \
+	ply-text-pulser.c ply-window.c strverscmp.c
 am__objects_1 =
+@HAVE_VERSIONSORT_FALSE@am__objects_2 =  \
+@HAVE_VERSIONSORT_FALSE@	libplybootsplash_la-strverscmp.lo
 am_libplybootsplash_la_OBJECTS = $(am__objects_1) \
 	libplybootsplash_la-ply-entry.lo \
 	libplybootsplash_la-ply-image.lo \
@@ -85,7 +95,7 @@
 	libplybootsplash_la-ply-progress-animation.lo \
 	libplybootsplash_la-ply-text-progress-bar.lo \
 	libplybootsplash_la-ply-text-pulser.lo \
-	libplybootsplash_la-ply-window.lo
+	libplybootsplash_la-ply-window.lo $(am__objects_2)
 libplybootsplash_la_OBJECTS = $(am_libplybootsplash_la_OBJECTS)
 AM_V_lt = $(am__v_lt_$(V))
 am__v_lt_ = $(am__v_lt_$(AM_DEFAULT_VERBOSITY))
@@ -121,7 +131,7 @@
 am__v_GEN_ = $(am__v_GEN_$(AM_DEFAULT_VERBOSITY))
 am__v_GEN_0 = @echo "  GEN   " $@;
 SOURCES = $(libplybootsplash_la_SOURCES)
-DIST_SOURCES = $(libplybootsplash_la_SOURCES)
+DIST_SOURCES = $(am__libplybootsplash_la_SOURCES_DIST)
 HEADERS = $(libplybootsplash_HEADERS)
 ETAGS = etags
 CTAGS = ctags
@@ -260,6 +270,7 @@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
+@HAVE_VERSIONSORT_FALSE@fallback = strverscmp.c
 INCLUDES = -I$(top_srcdir)                                                    \
            -I$(srcdir)                                                        \
            -I$(srcdir)/../libply                                              \
@@ -291,7 +302,8 @@
 		    ply-progress-animation.c                                 \
 		    ply-text-progress-bar.c                                  \
 		    ply-text-pulser.c                                        \
-		    ply-window.c
+		    ply-window.c                                             \
+		    $(fallback)
 
 MAINTAINERCLEANFILES = Makefile.in
 all: all-am
@@ -378,6 +390,7 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libplybootsplash_la-ply-text-pulser.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libplybootsplash_la-ply-throbber.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libplybootsplash_la-ply-window.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libplybootsplash_la-strverscmp.Plo@am__quote@
 
 .c.o:
 @am__fastdepCC_TRUE@	$(AM_V_CC)$(COMPILE) -MT $@ -MD -MP -MF $(DEPDIR)/$*.Tpo -c -o $@ $<
@@ -483,6 +496,14 @@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libplybootsplash_la_CFLAGS) $(CFLAGS) -c -o libplybootsplash_la-ply-window.lo `test -f 'ply-window.c' || echo '$(srcdir)/'`ply-window.c
 
+libplybootsplash_la-strverscmp.lo: strverscmp.c
+@am__fastdepCC_TRUE@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libplybootsplash_la_CFLAGS) $(CFLAGS) -MT libplybootsplash_la-strverscmp.lo -MD -MP -MF $(DEPDIR)/libplybootsplash_la-strverscmp.Tpo -c -o libplybootsplash_la-strverscmp.lo `test -f 'strverscmp.c' || echo '$(srcdir)/'`strverscmp.c
+@am__fastdepCC_TRUE@	$(AM_V_at)$(am__mv) $(DEPDIR)/libplybootsplash_la-strverscmp.Tpo $(DEPDIR)/libplybootsplash_la-strverscmp.Plo
+@am__fastdepCC_FALSE@	$(AM_V_CC) @AM_BACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='strverscmp.c' object='libplybootsplash_la-strverscmp.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libplybootsplash_la_CFLAGS) $(CFLAGS) -c -o libplybootsplash_la-strverscmp.lo `test -f 'strverscmp.c' || echo '$(srcdir)/'`strverscmp.c
+
 mostlyclean-libtool:
 	-rm -f *.lo
 
diff -Naur plymouth-0.7.1/src/libplybootsplash/ply-animation.c plymouth-0.7.1.patch/src/libplybootsplash/ply-animation.c
--- plymouth-0.7.1/src/libplybootsplash/ply-animation.c	2009-08-25 19:22:44.000000000 +0200
+++ plymouth-0.7.1.patch/src/libplybootsplash/ply-animation.c	2009-09-26 05:48:08.444705795 +0200
@@ -51,6 +51,10 @@
 
 #include <linux/kd.h>
 
+#ifndef HAVE_VERSIONSORT
+# include "strverscmp.h"
+#endif
+
 #ifndef FRAMES_PER_SECOND
 #define FRAMES_PER_SECOND 30
 #endif
diff -Naur plymouth-0.7.1/src/libplybootsplash/ply-progress-animation.c plymouth-0.7.1.patch/src/libplybootsplash/ply-progress-animation.c
--- plymouth-0.7.1/src/libplybootsplash/ply-progress-animation.c	2009-08-25 19:22:44.000000000 +0200
+++ plymouth-0.7.1.patch/src/libplybootsplash/ply-progress-animation.c	2009-09-26 05:48:44.260703855 +0200
@@ -51,6 +51,10 @@
 
 #include <linux/kd.h>
 
+#ifndef HAVE_VERSIONSORT
+# include "strverscmp.h"
+#endif
+
 struct _ply_progress_animation
 {
   ply_array_t *frames;
diff -Naur plymouth-0.7.1/src/libplybootsplash/ply-throbber.c plymouth-0.7.1.patch/src/libplybootsplash/ply-throbber.c
--- plymouth-0.7.1/src/libplybootsplash/ply-throbber.c	2009-08-25 19:22:44.000000000 +0200
+++ plymouth-0.7.1.patch/src/libplybootsplash/ply-throbber.c	2009-09-26 05:49:06.901828559 +0200
@@ -51,6 +51,10 @@
 
 #include <linux/kd.h>
 
+#ifndef HAVE_VERSIONSORT
+# include "strverscmp.h"
+#endif
+
 #ifndef FRAMES_PER_SECOND
 #define FRAMES_PER_SECOND 30
 #endif
diff -Naur plymouth-0.7.1/src/libplybootsplash/strverscmp.c plymouth-0.7.1.patch/src/libplybootsplash/strverscmp.c
--- plymouth-0.7.1/src/libplybootsplash/strverscmp.c	1970-01-01 01:00:00.000000000 +0100
+++ plymouth-0.7.1.patch/src/libplybootsplash/strverscmp.c	2009-09-26 05:42:33.663701895 +0200
@@ -0,0 +1,120 @@
+/* Compare strings while treating digits characters numerically.
+   Copyright (C) 1997, 2002 Free Software Foundation, Inc.
+   This file is part of the GNU C Library.
+   Contributed by Jean-François Bignolles <bignolle@ecoledoc.ibp.fr>, 1997.
+
+   The GNU C Library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2.1 of the License, or (at your option) any later version.
+
+   The GNU C Library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+
+   You should have received a copy of the GNU Lesser General Public
+   License along with the GNU C Library; if not, write to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
+   02111-1307 USA.  */
+
+#include <string.h>
+#include <ctype.h>
+#include <dirent.h>
+
+/* states: S_N: normal, S_I: comparing integral part, S_F: comparing
+           fractionnal parts, S_Z: idem but with leading Zeroes only */
+#define  S_N    0x0
+#define  S_I    0x4
+#define  S_F    0x8
+#define  S_Z    0xC
+
+/* result_type: CMP: return diff; LEN: compare using len_diff/diff */
+#define  CMP    2
+#define  LEN    3
+
+
+/* Compare S1 and S2 as strings holding indices/version numbers,
+   returning less than, equal to or greater than zero if S1 is less than,
+   equal to or greater than S2 (for more info, see the texinfo doc).
+*/
+
+int
+strverscmp (s1, s2)
+     const char *s1;
+     const char *s2;
+{
+  const unsigned char *p1 = (const unsigned char *) s1;
+  const unsigned char *p2 = (const unsigned char *) s2;
+  unsigned char c1, c2;
+  int state;
+  int diff;
+
+  /* Symbol(s)    0       [1-9]   others  (padding)
+     Transition   (10) 0  (01) d  (00) x  (11) -   */
+  static const unsigned int next_state[] =
+  {
+      /* state    x    d    0    - */
+      /* S_N */  S_N, S_I, S_Z, S_N,
+      /* S_I */  S_N, S_I, S_I, S_I,
+      /* S_F */  S_N, S_F, S_F, S_F,
+      /* S_Z */  S_N, S_F, S_Z, S_Z
+  };
+
+  static const int result_type[] =
+  {
+      /* state   x/x  x/d  x/0  x/-  d/x  d/d  d/0  d/-
+                 0/x  0/d  0/0  0/-  -/x  -/d  -/0  -/- */
+
+      /* S_N */  CMP, CMP, CMP, CMP, CMP, LEN, CMP, CMP,
+                 CMP, CMP, CMP, CMP, CMP, CMP, CMP, CMP,
+      /* S_I */  CMP, -1,  -1,  CMP, +1,  LEN, LEN, CMP,
+                 +1,  LEN, LEN, CMP, CMP, CMP, CMP, CMP,
+      /* S_F */  CMP, CMP, CMP, CMP, CMP, LEN, CMP, CMP,
+                 CMP, CMP, CMP, CMP, CMP, CMP, CMP, CMP,
+      /* S_Z */  CMP, +1,  +1,  CMP, -1,  CMP, CMP, CMP,
+                 -1,  CMP, CMP, CMP
+  };
+
+  if (p1 == p2)
+    return 0;
+
+  c1 = *p1++;
+  c2 = *p2++;
+  /* Hint: '0' is a digit too.  */
+  state = S_N | ((c1 == '0') + (isdigit (c1) != 0));
+
+  while ((diff = c1 - c2) == 0 && c1 != '\0')
+    {
+      state = next_state[state];
+      c1 = *p1++;
+      c2 = *p2++;
+      state |= (c1 == '0') + (isdigit (c1) != 0);
+    }
+
+  state = result_type[state << 2 | (((c2 == '0') + (isdigit (c2) != 0)))];
+
+  switch (state)
+  {
+    case CMP:
+      return diff;
+
+    case LEN:
+      while (isdigit (*p1++))
+	if (!isdigit (*p2++))
+	  return 1;
+
+      return isdigit (*p2) ? -1 : diff;
+
+    default:
+      return state;
+  }
+}
+
+
+int
+versionsort (const void *a, const void *b)
+{
+  return strverscmp ((*(const struct dirent **) a)->d_name,
+		     (*(const struct dirent **) b)->d_name);
+}
diff -Naur plymouth-0.7.1/src/libplybootsplash/strverscmp.h plymouth-0.7.1.patch/src/libplybootsplash/strverscmp.h
--- plymouth-0.7.1/src/libplybootsplash/strverscmp.h	1970-01-01 01:00:00.000000000 +0100
+++ plymouth-0.7.1.patch/src/libplybootsplash/strverscmp.h	2009-09-26 05:40:46.085826562 +0200
@@ -0,0 +1,7 @@
+#ifndef STRVERSCMP_H
+#define STRVERSCMP_H
+
+extern int strverscmp (const char *s1, const char *s2);
+extern int versionsort (const void *a, const void *b);
+
+#endif
