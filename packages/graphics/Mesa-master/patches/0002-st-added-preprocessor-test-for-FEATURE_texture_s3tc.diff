From d759a537726eccda7d6fccf6ecd09fdac0667088 Mon Sep 17 00:00:00 2001
From: Brian Paul <brianp@vmware.com>
Date: Tue, 12 May 2009 13:24:20 -0600
Subject: [PATCH 02/14] st: added preprocessor test for FEATURE_texture_s3tc

---
 src/mesa/state_tracker/st_cb_texture.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/src/mesa/state_tracker/st_cb_texture.c b/src/mesa/state_tracker/st_cb_texture.c
index 90a059c..019edb7 100644
--- a/src/mesa/state_tracker/st_cb_texture.c
+++ b/src/mesa/state_tracker/st_cb_texture.c
@@ -119,6 +119,7 @@ static GLboolean
 is_compressed_mesa_format(const struct gl_texture_format *format)
 {
    switch (format->MesaFormat) {
+#if FEATURE_texture_s3tc
    case MESA_FORMAT_RGB_DXT1:
    case MESA_FORMAT_RGBA_DXT1:
    case MESA_FORMAT_RGBA_DXT3:
@@ -128,6 +129,7 @@ is_compressed_mesa_format(const struct gl_texture_format *format)
    case MESA_FORMAT_SRGBA_DXT3:
    case MESA_FORMAT_SRGBA_DXT5:
       return GL_TRUE;
+#endif
    default:
       return GL_FALSE;
    }
-- 
1.6.2.4

