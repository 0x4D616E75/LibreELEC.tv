#!/bin/sh

. config/options

$SCRIPTS/install eet
$SCRIPTS/install libpng
$SCRIPTS/install jpeg
$SCRIPTS/install tiff
$SCRIPTS/install libiconv
$SCRIPTS/install freetype
$SCRIPTS/install fontconfig
$SCRIPTS/install libX11
$SCRIPTS/install libXrender
$SCRIPTS/install libXext
$SCRIPTS/install $MESA

SVN_RELEASE="-ver-pre-svn-04"
[ $TARGET_LIBC = uClibc ] && ELIBC=uclibc || ELIBC=gnu

SAVERS="eet jpeg png tiff"
ENGINES="buffer gl_x11 software_x11 xrender_x11 software_generic" #software_16 software_16_x11"
LOADERS="eet gif jpeg pmaps png tiff xpm"

mkdir -p $INSTALL/usr/lib
  cp -PR $PKG_BUILD/src/lib/.libs/libevas*.so* $INSTALL/usr/lib

for i in $SAVERS; do
  mkdir -p $INSTALL/usr/lib/evas/modules/savers/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
    cp -PR $PKG_BUILD/src/modules/savers/$i/.libs/module.so \
           $INSTALL/usr/lib/evas/modules/savers/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
done

for i in $ENGINES; do
  mkdir -p $INSTALL/usr/lib/evas/modules/engines/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
    cp -PR $PKG_BUILD/src/modules/engines/$i/.libs/module.so \
           $INSTALL/usr/lib/evas/modules/engines/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
done

for i in $LOADERS; do
  mkdir -p $INSTALL/usr/lib/evas/modules/loaders/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
    cp -PR $PKG_BUILD/src/modules/loaders/$i/.libs/module.so \
           $INSTALL/usr/lib/evas/modules/loaders/$i/linux-${ELIBC}-${TARGET_FAMILY}${SVN_RELEASE}
done
