#!/bin/sh

. config/options

$SCRIPTS/build toolchain

ALSA_CARDS="seq-dummy, hrtimer, rtctimer, hpet, pcsp, dummy, hda-intel, hdsp, hdspm,"

ALSA_OPTIONS="seq-hrtimer-default, seq-rtctimer-default, \
              support-old-api, verbose-procfs, verbose-printk, \
              pcm-xrun-debug, ac97-power-save, hda-hwdep, \
              hda-reconfig, hda-input-beep, hda-codec-realtek, \
              hda-codec-analog, hda-codec-sigmatel, \
              hda-codec-via, hda-codec-atihdmi, \
              hda-codec-nvhdmi, hda-codec-intelhdmi, \
              hda-codec-conexant, hda-codec-cmedia, \
              hda-codec-si3054, hda-generic, hda-power-save,"

#CFLAGS="$CFLAGS -D_FILE_OFFSET_BITS=32 -fPIC -DPIC"

cd $BUILD/$1*

./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=/usr \
            --sysconfdir=/etc \
            --localstatedir=/var \
            --disable-static \
            --enable-shared \
            --with-kernel=$(kernel_path) \
            --with-isapnp=no \
            --with-sequencer=yes \
            --with-oss=no \
            --with-pcm-oss-plugins=no \
            --with-cards="$ALSA_CARDS" \
            --with-card-options="$ALSA_OPTIONS" \


$MAKE

#$STRIP src/.libs/libasound.so*

#$MAKE -C include DESTDIR=$SYSROOT_PREFIX install-data
#$MAKE -C src DESTDIR=$SYSROOT_PREFIX install-exec
#$MAKE -C utils DESTDIR=$SYSROOT_PREFIX install-pkgconfigDATA
