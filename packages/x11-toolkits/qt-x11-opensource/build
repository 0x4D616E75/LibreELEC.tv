#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build zlib
$SCRIPTS/build dbus
$SCRIPTS/build openssl
$SCRIPTS/build mysql
$SCRIPTS/build freetype
$SCRIPTS/build jpeg
$SCRIPTS/build libpng
$SCRIPTS/build tiff
$SCRIPTS/build libX11
$SCRIPTS/build libXext
$SCRIPTS/build libXfixes
$SCRIPTS/build libXrandr
$SCRIPTS/build libXrender
$SCRIPTS/build libXinerama
$SCRIPTS/build fontconfig
$SCRIPTS/build $MESA
$SCRIPTS/build mysql

cd $PKG_BUILD

unset CC
unset CXX

  ./configure \
    -confirm-license \
    -prefix /usr \
    -hostprefix $SYSROOT_PREFIX/usr \
    -bindir /usr/bin \
    -libdir /usr/lib \
    -docdir /usr/share/doc \
    -headerdir /usr/include \
    -datadir /usr/share \
    -plugindir /usr/lib/plugins \
    -translationdir /usr/share/translations \
    -sysconfdir /etc \
    -examplesdir /usr/share/examples \
    -demosdir /usr/share/demos \
    -verbose \
    -platform linux-g++ \
    -xplatform linux-g++-cross \
    -little-endian \
    -force-pkg-config \
    -opensource \
    -release \
    -no-separate-debug-info \
    -shared \
    -no-fast \
    -largefile \
    -no-exceptions \
    -no-accessibility \
    -stl \
    -plugin-sql-mysql \
    -mysql_config $SYSROOT_PREFIX/usr/bin/mysql_config \
    -no-sql-db2 \
    -no-sql-ibase \
    -no-sql-oci \
    -no-sql-odbc \
    -no-sql-psql \
    -no-sql-sqlite \
    -no-sql-sqlite2 \
    -no-sql-tds \
    -qt3support \
    -no-xmlpatterns \
    -no-phonon \
    -no-phonon-backend \
    -no-svg \
    -webkit \
    -no-scripttools \
    -system-zlib \
    -qt-gif \
    -system-libtiff \
    -system-libpng \
    -qt-libmng \
    -system-libjpeg \
    -openssl-linked \
    -nomake demos \
    -nomake examples \
    -nomake docs \
    -no-rpath \
    -optimized-qmake \
    -no-nis \
    -no-cups \
    -no-iconv \
    -no-pch \
    -dbus-linked \
    -no-gtkstyle \
    -no-nas-sound \
    -opengl \
    -no-sm \
    -no-xshape \
    -xinerama \
    -no-xcursor \
    -xfixes \
    -xrandr \
    -xrender \
    -fontconfig \
    -no-xinput \
    -xkb \
    -no-glib \

make
make install

cp -PR bin/qmake $ROOT/$TOOLCHAIN/bin/
