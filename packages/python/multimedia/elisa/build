#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build Python
$SCRIPTS/build pigment-python
$SCRIPTS/build TwistedCore
$SCRIPTS/build TwistedWeb
$SCRIPTS/build TwistedWeb2
$SCRIPTS/build pysqlite
$SCRIPTS/build setuptools
$SCRIPTS/build zope.interface

$SCRIPTS/build cssutils
$SCRIPTS/build dbus-python
$SCRIPTS/build pymetar
$SCRIPTS/build twill

. config/options.python

PYTHON_LIB_DIR=`ls -d $SYSROOT_PREFIX/usr/lib/python*`

cd $BUILD/$1*

#$PYTHON setup.py build

$PYTHON setup.py install -O1 --single-version-externally-managed --root $SYSROOT_PREFIX --prefix /usr
$PYTHON setup.py install --single-version-externally-managed -O1 --root ./.install --prefix /usr

sed -i -e "s%$ROOT/$TOOLCHAIN%/usr%" .install/usr/bin/elisa

find .install -name "*.py" -exec rm -rf "{}" ";"
find .install -name "*.pyo" -exec rm -rf "{}" ";"

rm -rf .install/usr/share/applications
rm -rf .install/usr/share/icons
rm -rf .install/usr/share/man
#rm -rf .install/usr/share/pixmaps
