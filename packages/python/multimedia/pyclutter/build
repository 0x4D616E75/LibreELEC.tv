#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build Python
$SCRIPTS/build pygtk
$SCRIPTS/build pygobject
$SCRIPTS/build gst-python
$SCRIPTS/build clutter
$SCRIPTS/build clutter-gst
$SCRIPTS/build clutter-gtk
$SCRIPTS/build clutter-cairo

. config/options.python

cd $PKG_BUILD
#ac_cv_path_PYGTK_CODEGEN=`ls -d $ROOT/$BUILD/pygtk*/codegen/pygtk-codegen-2.0` \
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=/usr \
            --sysconfdir=/etc \
            --disable-static \
            --enable-shared \
            --with-cluttergst=yes \
            --with-cluttergtk=yes \
            --with-cluttercairo=yes \

make

$STRIP clutter/.libs/*.so
$STRIP clutter-cairo/.libs/*.so
$STRIP clutter-gst/.libs/*.so
$STRIP clutter-gtk/.libs/*.so

$MAKEINSTALL

$PYTHON -Wi -t $PYTHON_LIBDIR/compileall.py clutter
$PYTHON -Wi -t $PYTHON_LIBDIR/compileall.py clutter-cairo
$PYTHON -Wi -t $PYTHON_LIBDIR/compileall.py clutter-gst
$PYTHON -Wi -t $PYTHON_LIBDIR/compileall.py clutter-gtk
