#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build Python
$SCRIPTS/build gstreamer
$SCRIPTS/build gst-plugins-bad
$SCRIPTS/build gst-plugins-good
$SCRIPTS/build gst-rtsp
$SCRIPTS/build pygobject
$SCRIPTS/build pygtk
$SCRIPTS/build dbus-python
$SCRIPTS/build gst-python
$SCRIPTS/build libgee

. config/options.python

cd $BUILD/$1*
py_cv_mod_gobject_=yes \
py_cv_mod_gtk_=yes \
py_cv_mod_dbus_=yes \
py_cv_mod_gio_=yes \
py_cv_mod_gst_=yes \
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=/usr \
            --sysconfdir=/etc \
            --disable-static \
            --enable-shared \
            --disable-totem-plugin
make

$STRIP $1

$MAKEINSTALL

$PYTHON -Wi -t $PYTHON_LIBDIR/compileall.py ./client/gnomedvb
