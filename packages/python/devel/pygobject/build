#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build Python
$SCRIPTS/build glib
$SCRIPTS/build libffi

. config/options.python

cd $PKG_BUILD
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=/usr \
            --sysconfdir=/etc \
            --disable-static \
            --enable-shared \
            --enable-thread

make

$STRIP glib/.libs/libpyglib*.so*
$STRIP gobject/.libs/*.so
$STRIP glib/.libs/_glib.so
$STRIP gio/.libs/_gio.so
$STRIP gio/.libs/unix.so

$MAKEINSTALL

$PYTHON -Wi -t $PYTHON_LIBDIR/compileall.py .
