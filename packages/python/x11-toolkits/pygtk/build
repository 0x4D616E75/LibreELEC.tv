#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build Python
$SCRIPTS/build atk
$SCRIPTS/build gtk+
$SCRIPTS/build pygobject
$SCRIPTS/build pycairo
[ "$MEDIACENTER" = entertainer ] && \
  $SCRIPTS/build libglade


. config/options.python

cd $BUILD/$1*
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=/usr \
            --sysconfdir=/etc \
            --disable-static \
            --enable-shared \

make

$STRIP gtk/.libs/_gtk.so
$STRIP gtk/.libs/gtkunixprint.so
[ "$MEDIACENTER" = entertainer ] && \
  $STRIP gtk/.libs/glade.so
$STRIP .libs/atk.so
$STRIP .libs/pango.so
$STRIP .libs/pangocairo.so

$MAKEINSTALL

#chmod +x codegen/pygtk-codegen-2.0

$PYTHON -Wi -t $PYTHON_LIBDIR/compileall.py .
