From 0b03a65afa92d2e4c51ff49d39d4d34143749305 Mon Sep 17 00:00:00 2001
From: Bernhard Reutner-Fischer <rep.dot.nop@gmail.com>
Date: Thu, 17 Sep 2009 07:29:59 +0000
Subject: No need for a libresolv stub

  libresolv is just a stub anyway, default to not building it.

Signed-off-by: Bernhard Reutner-Fischer <rep.dot.nop@gmail.com>
---
diff --git a/extra/Configs/Config.in b/extra/Configs/Config.in
index 0108cb0..efa90d7 100644
--- a/extra/Configs/Config.in
+++ b/extra/Configs/Config.in
@@ -1183,6 +1183,12 @@ config UCLIBC_HAS_EXTRA_COMPAT_RES_STATE
 	  Answer Y if selecting UCLIBC_HAS_COMPAT_RES_STATE is not enough.
 	  As far as I can say, this should never be needed.
 
+config UCLIBC_HAS_RESOLV_STUB
+	bool "Provide libresolv stub"
+	default n
+	help
+	  Provide a dummy resolv library.
+
 endif
 
 
diff --git a/libresolv/Makefile.in b/libresolv/Makefile.in
index b7475d7..879603b 100644
--- a/libresolv/Makefile.in
+++ b/libresolv/Makefile.in
@@ -28,8 +28,10 @@ libresolv-a-y := $(libresolv_OBJ)
 endif
 libresolv-so-y := $(libresolv_OBJ:.o=.os)
 
+ifeq ($(UCLIBC_HAS_RESOLV_STUB),y)
 lib-a-y += $(top_builddir)lib/libresolv.a
 lib-so-y += $(top_builddir)lib/libresolv.so
+endif
 objclean-y += libresolv_clean
 
 ifeq ($(DOPIC),y)
--
cgit v0.8.2.1
