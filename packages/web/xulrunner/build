#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build gtk+
$SCRIPTS/build libIDL
$SCRIPTS/build libIDL-host
$SCRIPTS/unpack fennec

cd $BUILD/fennec*

mkdir -p .objdir-$1
cd .objdir-$1

ac_cv_visibility_pragma=no \
CROSS_COMPILE=yes \
HOST_CC=$HOST_CC \
HOST_CXX=$HOST_CXX \
HOST_CFLAGS=$HOST_CFLAGS \
HOST_CXXFLAGS=$HOST_CXXFLAGS \
HOST_LDFLAGS=$HOST_LDFLAGS \
HOST_RANLIB=$HOST_RANLIB \
HOST_AR=$HOST_AR \
HOST_LIBIDL_CONFIG="$ROOT/$TOOLCHAIN/bin/libIDL-config-2" \
../configure --host=$TARGET_NAME \
             --build=$HOST_NAME \
             --prefix=/usr \
             --sysconfdir=/etc \
             --enable-libxul \
             --enable-application=xulrunner \
             --enable-default-toolkit=cairo-gtk2 \
             --disable-debug \
             --disable-mobile-optimize \
             --enable-optimize \
             --disable-activex \
             --disable-activex-scripting \
             --disable-installer \
             --disable-logging \
             --disable-updater \
             --disable-gnomevfs \
             --disable-gnomeui \
             --disable-dbus \
             --disable-plugins \
             --disable-view-source \
             --disable-printing \
             --disable-crashreporter \
             --disable-xprint \
             --disable-tests \
             --disable-libnotify \
             --with-libIDL \
             --disable-parental-controls \
             --disable-javaxpcom \
             --with-system-bz2 \
             --with-system-jpeg \
               --without-system-png \
             --with-system-zlib \
             --disable-javaxpcom \
             --enable-canvas \
             --enable-safe-browsing \
             --enable-svg \
             --enable-system-cairo \
             --enable-system-sqlite \

#            --enable-extensions=python,default \

make

$MAKEINSTALL
