#!/bin/sh

. config/options

$SCRIPTS/build toolchain
$SCRIPTS/build libxml2
$SCRIPTS/build gtk+
$SCRIPTS/build Python
$SCRIPTS/build pygobject
$SCRIPTS/build swig
$SCRIPTS/build mutagen

. config/options.python

cd $BUILD/$1*
./configure --host=$TARGET_NAME \
            --build=$HOST_NAME \
            --prefix=/usr \
            --sysconfdir=/etc \
            --disable-static \
            --enable-shared \
            --with-hal \
            --enable-libxml \
            --enable-gdk-pixbuf \
            --enable-pygobject \
            --with-python=$PYTHON

make

$STRIP src/.libs/*.so*
$STRIP bindings/python/.libs/*.so

$MAKEINSTALL

$PYTHON -Wi -t $PYTHON_LIBDIR/compileall.py bindings/python
